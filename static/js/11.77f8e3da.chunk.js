(this["webpackJsonpall-in-one"]=this["webpackJsonpall-in-one"]||[]).push([[11],{857:function(e,t,r){"use strict";r.r(t);var o=r(6),n=r(21),s=r(81),i=r(47);const a={initialized:!1,apiWrapper:function(){const e={code:"0",string:"No Error",diagnostic:"No Error"},t={code:"101",string:"General Exception",diagnostic:"General Exception"};let r=!1,o=null;return{doLMSInitialize:n,doLMSFinish:function(){if(!r)return"true";let e;const t=i();if(null==t)return l("Unable to locate the LMS's API Implementation.\nLMSFinish was not successful."),"false";if(e=t.LMSFinish(""),"true"!==e.toString()){const e=s();l("LMSFinish failed with error code: ".concat(e.code))}return r=!1,e.toString()},doLMSGetValue:function(t){const o=i();let a="";if(null==o)l("Unable to locate the LMS's API Implementation.\nLMSGetValue was not successful.");else if(r||n()){a=o.LMSGetValue(t);const r=s();r.code!==e.code&&(l("LMSGetValue(".concat(t,") failed. \n        ").concat(r.code,": ").concat(r.string)),a="")}else{const e=s();l("LMSGetValue failed - Could not initialize communication with the LMS - error code: ".concat(e.code))}return a.toString()},doLMSSetValue:function(e,t){const o=i();let a,c="false";null==o?l("Unable to locate the LMS's API Implementation.\nLMSSetValue was not successful."):r||n()?(c=o.LMSSetValue(e,t),"true"!==c.toString()&&(a=s(),l("LMSSetValue(".concat(e,", ").concat(t,") failed. \n          ").concat(a.code,": ").concat(a.string)))):(a=s(),l("LMSSetValue failed - Could not initialize communication with the LMS - error code: "+a.code));return c.toString()},doLMSCommit:function(){const e=i();let t,o="false";null==e?l("Unable to locate the LMS's API Implementation.\nLMSCommit was not successful."):r||n()?(o=e.LMSCommit(""),"true"!==o&&(t=s(),l("LMSCommit failed - error code: ".concat(t.code)))):(t=s(),l("LMSCommit failed - Could not initialize communication with the LMS - error code: ".concat(t.code)));return o.toString()}};function n(){if(r)return"true";const e=i();if(null==e)return l("Unable to locate the LMS's API Implementation.\nLMSInitialize was not successful."),"false";const t=e.LMSInitialize("");if("true"!==t.toString()){const e=s();l("LMSInitialize failed with error code: ".concat(e.code))}else r=!0;return t.toString()}function s(){const r={code:e.code,string:e.string,diagnostic:e.diagnostic},o=i();return null==o?(l("Unable to locate the LMS's API Implementation.\nCannot determine LMS error code."),r.code=t.code,r.string=t.string,r.diagnostic="Unable to locate the LMS's API Implementation. Cannot determine LMS error code.",r):(r.code=o.LMSGetLastError().toString(),r.code!==e.code&&(r.string=o.LMSGetErrorString(r.code),r.diagnostic=o.LMSGetDiagnostic("")),r)}function i(){return null==o&&(o=function(){let e=a(window);null==e&&null!=window.opener&&"undefined"!=typeof window.opener&&(e=a(window.opener));return e}()),o}function a(e){let t=0;for(;null==e.API&&null!=e.parent&&e.parent!==e;){if(t++,t>7)return l("Error finding API -- too deeply nested."),null;e=e.parent}return e.API}}(),startTime:null},c=[console.log.bind(console)];var d={initialize(){var e;a.initialized="true"===a.apiWrapper.doLMSInitialize(),e="incomplete",a.apiWrapper.doLMSSetValue("cmi.core.lesson_status",e),a.initialized&&(a.startTime=new Date,window.addEventListener&&(window.addEventListener("pagehide",u),window.addEventListener("beforeunload",p)))},progressProvider:{getProgress:function(){let e={};try{e=JSON.parse(Object(i.b)(a.apiWrapper.doLMSGetValue("cmi.suspend_data")))}catch(t){l("Unable to restore progress")}return e},saveProgress:function(e){const t="true"===a.apiWrapper.doLMSSetValue("cmi.suspend_data",JSON.stringify(e)),r="true"===a.apiWrapper.doLMSSetValue("cmi.core.lesson_status","incomplete"),o=t&&r;o&&(a.apiWrapper.doLMSSetValue("cmi.core.exit","suspend"),a.apiWrapper.doLMSCommit());return o},removeProgress:function(e){const t=e?"passed":"failed";a.apiWrapper.doLMSSetValue("cmi.core.lesson_status",t);const r="true"===a.apiWrapper.doLMSSetValue("cmi.suspend_data","");r&&(a.apiWrapper.doLMSSetValue("cmi.core.exit",""),a.apiWrapper.doLMSCommit());return r}},userInfoProvider:{getUsername:()=>a.apiWrapper.doLMSGetValue("cmi.core.student_name"),getAccountId:()=>a.apiWrapper.doLMSGetValue("cmi.core.student_id"),getAccountHomePage:()=>window.location.origin||"".concat(window.location.protocol,"//").concat(window.location.host)},courseFinished:function(e){a.apiWrapper.doLMSSetValue("cmi.core.lesson_status",Object(s.e)(e.status)?"passed":"failed"),m(e.score),a.apiWrapper.doLMSCommit(),window.removeEventListener&&(window.removeEventListener("pagehide",u),window.removeEventListener("beforeunload",p))},courseFinalized:function(e){window.removeEventListener&&(window.removeEventListener("pagehide",u),window.removeEventListener("beforeunload",p));e.isCourseFinished||m(e.score);u()},courseProgressed:function(){},addErrorHandler:function(e){c.push(e)}};function l(e){for(const t of c)t(e)}function u(){const e=(new Date).getTime()-a.startTime.getTime();a.apiWrapper.doLMSSetValue("cmi.core.session_time",new Date(0,0,0,0,0,0,e).toString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")),a.apiWrapper.doLMSCommit(),a.apiWrapper.doLMSFinish()}function p(e){return e.preventDefault(),e.returnValue="",""}function m(e){a.apiWrapper.doLMSSetValue("cmi.core.score.min","0"),a.apiWrapper.doLMSSetValue("cmi.core.score.max","100"),a.apiWrapper.doLMSSetValue("cmi.core.score.raw",e)}const g={initialized:!1,apiWrapper:function(){const e=window.console,t={code:"0",string:"No Error",diagnostic:"No Error"},r={code:"101",string:"General Exception",diagnostic:"General Exception"};let o=!1,n=null;return{doLMSInitialize:s,doLMSFinish:function(){if(!o)return"true";const e=d(),t=e.Terminate("");if(null==e)return u("Unable to locate the LMS's API Implementation.\nTerminate was not successful."),"false";if("true"!==t.toString()){const e=c();u("Terminate failed with error code: ".concat(e.code))}return o=!1,t.toString()},doLMSGetValue:i,doLMSSetValue:a,doLMSCommit:function(){const e=d();let t="false";if(null==e)u("Unable to locate the LMS's API Implementation.\nCommit was not successful.");else if(o||s()){if(t=e.Commit(""),"true"!==t){const e=c();u("Commit failed - error code: ".concat(e.code))}}else{const e=c();u("Commit failed - Could not initialize communication with the LMS - error code: ".concat(e.code))}return t.toString()}};function s(){if(o)return"true";const e=d();if(null==e)return u("Unable to locate the LMS's API Implementation.\nInitialize was not successful."),"false";const t=e.Initialize("");if("true"!==t.toString()){const e=c();u("Initialize failed with error code: ".concat(e.code))}else o=!0;return t.toString()}function i(e){const r=d();let n="";if(null==r)u("Unable to locate the LMS's API Implementation.\nGetValue was not successful.");else if(o||s()){n=r.GetValue(e);const o=c();o.code!==t.code&&(u("GetValue(".concat(e,") failed.\n         ").concat(o.code,": ").concat(o.string)),n="")}else{const e=c();u("GetValue failed - Could not initialize communication with the LMS - error code: ".concat(e.code))}return n.toString()}function a(e,t){const r=d();let n="false";if(null==r)u("Unable to locate the LMS's API Implementation.\nSetValue was not successful.");else if(o||s()){if(n=r.SetValue(e,t),"true"!==n.toString()){const r=c();u("SetValue(".concat(e,", ").concat(t,") failed. \n        ").concat(r.code,": ").concat(r.string))}}else{const e=c();u("SetValue failed - Could not initialize communication with the LMS - error code: ".concat(e.code))}return n.toString()}function c(){let e={code:t.code,string:t.string,diagnostic:t.diagnostic};const o=d();return null==o?(u("Unable to locate the LMS's API Implementation.\nCannot determine LMS error code."),e.code=r.code,e.string=r.string,e.diagnostic="Unable to locate the LMS's API Implementation. Cannot determine LMS error code.",e):(e.code=o.GetLastError().toString(),e.code!==t.code&&(e.string=o.GetErrorString(e.code),e.diagnostic=o.GetDiagnostic("")),e)}function d(){return null==n&&(n=function(){let e=l(window);null==e&&null!=window.opener&&"undefined"!=typeof window.opener&&(e=l(window.opener));null==e&&u("Unable to find an API adapter");return e}()),n}function l(e){let t=0;for(;null==e.API_1484_11&&null!=e.parent&&e.parent!==e;){if(t++,t>500)return u("Error finding API -- too deeply nested."),null;e=e.parent}return e.API_1484_11}function u(t){e.log(t)}}(),startTime:null},S=[console.log.bind(console)];var f={initialize(){g.initialized="true"===g.apiWrapper.doLMSInitialize(),g.apiWrapper.doLMSSetValue("cmi.completion_status","incomplete"),g.apiWrapper.doLMSSetValue("cmi.success_status","unknown"),g.initialized&&(g.startTime=new Date,window.addEventListener&&(window.addEventListener("pagehide",h),window.addEventListener("beforeunload",w)))},progressProvider:{getProgress:function(){let e={};try{e=JSON.parse(Object(i.b)(g.apiWrapper.doLMSGetValue("cmi.suspend_data")))}catch(t){!function(e){for(const t of S)t(e)}("Unable to restore progress")}return e},saveProgress:function(e){const t="true"===g.apiWrapper.doLMSSetValue("cmi.suspend_data",JSON.stringify(e)),r="true"===g.apiWrapper.doLMSSetValue("cmi.completion_status","incomplete"),o=t&&r;o&&(g.apiWrapper.doLMSSetValue("cmi.exit","suspend"),g.apiWrapper.doLMSCommit());return o},removeProgress:function(){const e="true"===g.apiWrapper.doLMSSetValue("cmi.suspend_data","");e&&(g.apiWrapper.doLMSSetValue("cmi.exit",""),g.apiWrapper.doLMSCommit());return e}},userInfoProvider:{getUsername:()=>g.apiWrapper.doLMSGetValue("cmi.learner_name"),getAccountId:()=>g.apiWrapper.doLMSGetValue("cmi.learner_id"),getAccountHomePage:()=>window.location.origin||"".concat(window.location.protocol,"//").concat(window.location.host)},courseFinished:function(e){g.apiWrapper.doLMSSetValue("cmi.completion_status","completed"),g.apiWrapper.doLMSSetValue("cmi.success_status",Object(s.e)(e.status)?"passed":"failed"),L(e.score),g.apiWrapper.doLMSCommit(),window.removeEventListener&&(window.removeEventListener("pagehide",h),window.removeEventListener("beforeunload",w))},courseFinalized:function(e){window.removeEventListener&&(window.removeEventListener("pagehide",h),window.removeEventListener("beforeunload",w));e.isCourseFinished||L(e.score);h()},courseProgressed:function(e){g.apiWrapper.doLMSSetValue("cmi.progress_measure",e.course.score/100),g.apiWrapper.doLMSCommit()},addErrorHandler:function(e){S.push(e)}};function h(){const e=(new Date).getTime()-g.startTime.getTime();g.apiWrapper.doLMSSetValue("cmi.session_time",function(e){const t=Math.round(e%1e3/10),r=Math.floor(e/1e3%60),o=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=t>0?".".concat(t):"";return"PT".concat(n,"H").concat(o,"M").concat(r).concat(s,"S")}(e)),g.apiWrapper.doLMSCommit(),g.apiWrapper.doLMSFinish()}function w(e){return e.preventDefault(),e.returnValue="",""}function L(e){g.apiWrapper.doLMSSetValue("cmi.score.min","0"),g.apiWrapper.doLMSSetValue("cmi.score.max","100"),g.apiWrapper.doLMSSetValue("cmi.score.raw",e),g.apiWrapper.doLMSSetValue("cmi.score.scaled",e/100)}let M;!function(e){e.Scorm12="1.2",e.Scorm2004="2004"}(M||(M={}));const v={[M.Scorm12]:{initialize:"scorm12_wrapper:initialize",getProgress:"scorm12_wrapper:getProgress",saveProgress:"scorm12_wrapper:saveProgress",removeProgress:"scorm12_wrapper:removeProgress",finalizeCourseSession:"scorm12_wrapper:finalizeCourseSession",sendCourseResults:"scorm12_wrapper:sendCourseResults"},[M.Scorm2004]:{initialize:"scorm2004_wrapper:initialize",getProgress:"scorm2004_wrapper:getProgress",saveProgress:"scorm2004_wrapper:saveProgress",removeProgress:"scorm2004_wrapper:removeProgress",updateCourseProgress:"scorm2004_wrapper:updateCourseProgress",finalizeCourseSession:"scorm2004_wrapper:finalizeCourseSession",sendCourseResults:"scorm2004_wrapper:sendCourseResults"}};var I=class{constructor(e,t){this.messageNames=void 0,this.scormInterface=void 0,this.messageNames=v[e],this.scormInterface=t}async getProgress(){let e={};try{const t={name:this.messageNames.getProgress},r=await this.scormInterface.sendAndWait(t);e=JSON.parse(Object(i.b)(r))}catch(t){console.log("Unable to restore progress")}return e}async saveProgress(e){const t={name:this.messageNames.saveProgress,progress:e};return this.scormInterface.sendAndWait(t)}async removeProgress(e){const t={name:this.messageNames.removeProgress};return void 0!==e&&(t.lessonStatus=e?"passed":"failed"),this.scormInterface.sendAndWait(t)}};var P=class{constructor(){this.learnerName="",this.learnerId="",this.wrapperOrigin=_()}setUserInfo(e,t){this.learnerName=e,this.learnerId=t}getUsername(){return this.learnerName}getAccountId(){return this.learnerId}getAccountHomePage(){return String(this.wrapperOrigin)}},W=r(4),V=r(393);var C=class{constructor(e){this.messagePrefix="message:scorm:",this.validMessages=void 0,this.parentWindow=window.parent,this.messages={},this.parentOrigin="*",this.validMessages=Object.values(v[e]),this.resolveParentOrigin(),this.addMessageListener()}async sendAndWait(e){const t=this.send(e);return this.getMessage(t)}send(e){const t=Object(W.a)({},e,{id:Object(V.generate)()});return this.parentWindow.postMessage(t,this.parentOrigin),t.id}resolveParentOrigin(){const e=_();e?this.parentOrigin=e:console.error("Parent origin is not provided")}addMessageListener(){window.addEventListener("message",e=>{var t;e.origin===this.parentOrigin&&this.validMessages.includes(null===(t=e.data)||void 0===t?void 0:t.name)&&(this.messages[e.data.id]=e.data.value,o.a.emit("".concat(this.messagePrefix).concat(e.data.id),e.data.id))})}getMessage(e){return new Promise(t=>{const r=n=>{n===e&&(t(this.messages[e]),delete this.messages[e],o.a.off("".concat(this.messagePrefix).concat(n),r))};o.a.on("".concat(this.messagePrefix).concat(e),r)})}};var b=class{constructor(e){this.scormInterface=void 0,this.progressProviderInstance=void 0,this.userInfoProviderInstance=void 0,this.messageNames=void 0,this.errorHandlers=[console.log.bind(console)],this.scormInterface=new C(e),this.messageNames=v[e],this.progressProviderInstance=new I(e,this.scormInterface),this.userInfoProviderInstance=new P,this.courseFinished=this.courseFinished.bind(this),this.courseFinalized=this.courseFinalized.bind(this),this.courseProgressed=this.courseProgressed.bind(this)}get progressProvider(){return this.progressProviderInstance}get userInfoProvider(){return this.userInfoProviderInstance}addErrorHandler(e){this.errorHandlers.push(e)}async initialize(){const e={name:this.messageNames.initialize},t=await this.scormInterface.sendAndWait(e),r=t.learnerName,o=t.learnerId;this.userInfoProviderInstance.setUserInfo(r,o)}};var E=new class extends b{constructor(){super(M.Scorm12)}courseFinished(e){const t={name:this.messageNames.sendCourseResults,lessonStatus:Object(s.e)(e.status)?"passed":"failed",courseScore:e.score};this.scormInterface.send(t)}courseFinalized(e){const t={name:this.messageNames.finalizeCourseSession,isCourseFinished:e.isCourseFinished,courseScore:e.score};this.scormInterface.send(t)}courseProgressed(){}};var z=new class extends b{constructor(){super(M.Scorm2004)}courseFinished(e){const t={name:this.messageNames.sendCourseResults,successStatus:Object(s.e)(e.status)?"passed":"failed",courseScore:e.score};this.scormInterface.send(t)}courseFinalized(e){const t={name:this.messageNames.finalizeCourseSession,isCourseFinished:e.isCourseFinished,courseScore:e.score};this.scormInterface.send(t)}courseProgressed(e){const t={name:String(this.messageNames.updateCourseProgress),progressValue:e.course.score/100};this.scormInterface.send(t)}};function _(){return Object(n.i)("wrapper_origin")}function A(e,t){return e?t?z:f:t?E:d}var F=new class{constructor(){this.apiWrapper=void 0}on(e,t){this.apiWrapper=A(e,t),this.setupActionEvents("on")}off(){this.setupActionEvents("off")}setupActionEvents(e){o.a[e](o.b.COURSE_FINISHED,this.apiWrapper.courseFinished),o.a[e](o.b.COURSE_FINALIZED,this.apiWrapper.courseFinalized),o.a[e](o.b.COURSE_PROGRESSED,this.apiWrapper.courseProgressed)}};t.default=new class{constructor(){this.apiWrapper=void 0}get addErrorHandler(){return this.apiWrapper.addErrorHandler}get userInfoProvider(){return this.apiWrapper.userInfoProvider}get progressProvider(){return this.apiWrapper.progressProvider}async initialize(e,t){this.apiWrapper=A(e,t),await this.apiWrapper.initialize(),F.on(e,t)}}}}]);